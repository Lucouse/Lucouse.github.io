var Api=function(){function e(a,c,b){fetch(a).then(function(a){if(c===d.json)return a.json();if(c===d.text)return a.text()}).then(function(a){b(a)}).catch(function(a){message.alertMessage(a,null)})}var d={json:"json",text:"text",html:"html",css:"css",xml:"xml"};return{getComponent:function(a,c,b){a=util.buildUrl(["Lucouse.github.io","component",a,c]);e(a,d.text,function(a){b(a)})},getComponentList:function(a){var c=util.buildUrl(["Lucouse.github.io","list.json"]);e(c,d.json,function(b){a(b)})},download:e,
getProjectInfo:function(a){var c=util.buildUrl(["Lucouse.github.io","project.json"]);e(c,d.json,function(b){a(b)})},getHelpInfo:function(a){var c=util.buildUrl(["Lucouse.github.io","help.json"]);e(c,d.json,function(b){a(b)})}}},api=new Api,Util=function(){function e(a){var c=(new JSZip).folder(a.folder.name);c.file(a.folder.file[0].name,a.folder.file[0].value);c.file(a.folder.file[1].name,a.folder.file[1].value);c.generateAsync({type:"base64"}).then(function(a){location.href="data:application/zip;base64,"+
a})}function d(a,c){var b="",d;for(d in a)b=b+a[d]+";";c(b)}return{buildDom:function(a){var c=a.length;a.forEach(function(b,d){d+1<c&&b.appendChild(a[d+1])})},downloadComponent:function(a){api.getComponent(a,"index.html",function(c){api.getComponent(a,"index.css",function(b){e({folder:{name:a,file:[{name:"index.html",value:c},{name:"index.css",value:b}]}})})})},buildZip:e,buildUrl:function(a){var c="";a.forEach(function(a){c=c+"/"+a});return c},buildMailToAddress:function(a,c){var b="MailTo:";d(a.address,
function(e){b=b+e+"?";b=b+"subject="+a.subject+"&";d(a.cc,function(f){""!==f&&(b=b+"cc="+f+"&");d(a.bcc,function(d){""!==f&&(b=b+"bcc="+d+"&body="+a.body);b=b+"body="+a.body;c(b)})})})}}},util=new Util,Help=function(){var e="";return{buildHelpPage:function(d){void 0==d&&(d=document.body);var a=document.createElement("div"),c=document.createElement("div");a.setAttribute("class","help-page-left-menu");c.setAttribute("class","help-page-right-content");d.appendChild(a);d.appendChild(c);api.getHelpInfo(function(b){e=
b;b=a;void 0==b&&(b=document.body);var d=document.createElement("ul");d.setAttribute("class","list-vertical");for(var f in e){var k=document.createElement("li"),h=document.createElement("a");h.innerHTML=e[f].name;h.setAttribute("href","#"+e[f].id);d.appendChild(k).appendChild(h)}b.appendChild(d);for(var n in e)f=document.createElement("div"),b=document.createElement("h3"),d=document.createElement("a"),k=document.createElement("p"),d.setAttribute("id",e[n].id),d.innerHTML=e[n].name,k.innerHTML=e[n].content,
f.appendChild(b).appendChild(d),f.appendChild(k),c.appendChild(f)})}}},help=new Help,Main=function(e){function d(){api.getComponentList(function(b){b.forEach(function(b){api.getComponent(b.id,"index.html",function(c){var d=document.createElement("div"),e=document.createElement("h3"),f=document.createElement("div"),h=document.createElement("div");d.setAttribute("class","main-panel");e.innerText=b.name_cn;f.innerHTML=c.replace("index.css","component/"+b.id+"/index.min.css").replace("index.js","component/"+
b.id+"/index.min.js");h.setAttribute("class","component-tooBar");a(h,b.id);util.buildDom([document.getElementById("container"),d,e]);util.buildDom([d,f]);util.buildDom([d,h])})})})}function a(a,b){fontFaceIcon.buildIcon(a,{iconClass:"i_download","data-tooltip":"\u4e0b\u8f7d"},function(a){a.onclick=function(a){util.downloadComponent(b)}});fontFaceIcon.buildIcon(a,{iconClass:"i_feedback","data-tooltip":"\u53cd\u9988"},function(d){d.onclick=function(d){var c=document.createElement("a");util.buildMailToAddress({address:["2809606201@qq.com"],
subject:"\u7ec4\u4ef6\u53cd\u9988 id:"+b,cc:[],bcc:[],body:"\u5728\u8fd9\u91cc\u5199\u4e0b\u4f60\u7684\u5185\u5bb9"},function(a){c.setAttribute("href",a)});a.appendChild(c);c.click();a.removeChild(c)}});fontFaceIcon.buildIcon(a,{iconClass:"i_open","data-tooltip":"\u65b0\u7a97\u53e3\u6253\u5f00"},function(a){a.onclick=function(a){g(b)}})}function c(){api.getProjectInfo(function(a){var b=document.getElementsByClassName("header")[0],c=document.createElement("div"),d=document.createElement("a"),e=document.createElement("h2"),
f=document.createElement("div"),l=document.createElement("div");e.innerText=a.projectName;f.innerText=a.version;l.innerText=a.latestUpdateDate;c.setAttribute("class","project-info");d.setAttribute("href","https://lucouse.github.io");util.buildDom([b,c]);util.buildDom([c,d,e]);util.buildDom([c,f]);util.buildDom([c,l])})}function b(){var a=document.getElementsByClassName("footer"),b=document.createElement("div"),c=document.createElement("ul");c.setAttribute("class","footer-ul list-Landscape");var d=
[{name:"\u5e2e\u52a9",url:"pages/help.html"}],e;for(e in d){var g=document.createElement("li"),l=document.createElement("a");l.innerHTML=d[e].name;l.setAttribute("href",d[e].url);g.appendChild(l);c.appendChild(g)}g=document.createElement("li");l=document.createElement("li");l.innerHTML="contact us @";g.appendChild(l);g.setAttribute("id","contact-us");d=[{iconClass:{iconClass:"i_github github-icon none-shadow"},url:"https://github.com/Lucouse"}];for(e in d){var p=document.createElement("li");l=document.createElement("a");
l.setAttribute("href",d[e].url);g.appendChild(p).appendChild(l);fontFaceIcon.buildIcon(l,d[e].iconClass,function(a){a.click=function(){window.location=d[e].url}})}c.appendChild(g);b.appendChild(c);a[0].appendChild(b)}function g(a){cover.showCover();var b=document.createElement("div"),d=document.createElement("h3"),c=document.createElement("div"),e=document.createElement("div");b.appendChild(d);b.appendChild(c);b.appendChild(e);c.setAttribute("class","component-detail-content");e.setAttribute("class",
"popUp-toolbar-container");api.getComponent(a,"index.html",function(g){c.innerHTML=g.replace("index.css","component/"+a+"/index.min.css").replace("index.js","component/"+a+"/index.min.js");api.getComponentList(function(b){for(var c in b)if(b[c].id===a){d.innerHTML=b[c].name_cn;var g=void 0,f=b[c].compatibility,l=e,h="",k="",m="";for(g in f){switch(f[g].name){case "weChat":h="i_wechat_6 wechat-icon";k="\u5fae\u4fe1";m=""===f[g].version?"\u672a\u77e5":f[g].version;break;case "chrome":h="i_chrome chrome-icon";
k="Chrome";m=""===f[g].version?"\u672a\u77e5":f[g].version;break;case "firefox":h="i_firefox_logotyp firefox-icon";k="\u706b\u72d0";m=""===f[g].version?"\u672a\u77e5":f[g].version;break;case "ie":h="i_ie ie-icon";k="IE";m=""===f[g].version?"\u672a\u77e5":f[g].version;break;case "edge":h="i_edge edge-icon",k="Edge",m=""===f[g].version?"\u672a\u77e5":f[g].version}fontFaceIcon.buildIcon(l,{iconClass:h,"data-tooltip":k,attr:[{name:"version",value:m}]})}}});popUp.showPopUp(void 0,"custom-popUp-win",b)})}
return{init:function(){d();c();b()},helpInit:function(){c();b();help.buildHelpPage(document.getElementsByClassName("container")[0])}}},main=new Main,Cover=function(){var e=document.createElement("div"),d=document.body;return{showCover:function(a){void 0!=a&&(d=a);e.setAttribute("class","cover");d.appendChild(e)},removeCover:function(){d.removeChild(e)}}},cover=new Cover,Message=function(){function e(a){a.fadeOut(800,function(){a.remove()})}function d(a,c){var b=$("<div></div>");c=$("<div></div>");
var d=$("<div></div>");c.text("X");b.attr("class","message-container");c.attr("class","message-close");c.click(function(){e(b)});d.html(a);b.append(c);b.append(d);b.fadeOut(8E3,function(){b.remove()});return b}return{type:{success:"success",error:"error",info:"info",warning:"warning"},alertMessage:function(a,c){$(document.body).append(d(a,c))}}},message=new Message,PopUp=function(){return{showPopUp:function(e,d,a){cover.showCover();void 0==e&&(e=document.body);var c=document.createElement("div"),
b=document.createElement("div"),g=document.createElement("div"),f=document.createElement("div"),k=document.createElement("i"),h=document.createElement("div");b.setAttribute("class","close-button-container");g.setAttribute("id","icon-panel");k.setAttribute("class","i_close close-button-i");b.appendChild(g).appendChild(f).appendChild(k);void 0!==d?c.setAttribute("class",d):c.setAttribute("class","popUpWin");h.setAttribute("class","popUp-content");e.appendChild(c).appendChild(b);c.appendChild(h).appendChild(a);
k.onclick=function(a){e.removeChild(c);cover.removeCover()}}}},popUp=new PopUp,FontFaceIcon=function(){return{buildIcon:function(e,d,a){var c=document.createElement("div"),b=document.createElement("div"),g=document.createElement("i");c.setAttribute("id","icon-panel");void 0!==d["data-tooltip"]?(g.setAttribute("class",d.iconClass+" tooltip"),g.setAttribute("data-tooltip",d["data-tooltip"])):g.setAttribute("class",d.iconClass);for(var f in d.attr)c.setAttribute(d.attr[f].name,d.attr[f].value);e.appendChild(c).appendChild(b).appendChild(g);
void 0!==a&&a(g)}}},fontFaceIcon=new FontFaceIcon;
