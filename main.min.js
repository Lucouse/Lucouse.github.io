var Api=function(){function f(d,a,b){fetch(d).then(function(c){if(a===e.json)return c.json();if(a===e.text)return c.text()}).then(function(a){b(a)}).catch(function(a){message.alertMessage(a,null);console.error(a)})}var e={json:"json",text:"text",html:"html",css:"css",xml:"xml"};return{getComponent:function(d,a,b){d=util.buildUrl(["Lucouse.github.io","component",d,a]);f(d,e.text,function(a){b(a)})},getComponentList:function(d){var a=util.buildUrl(["Lucouse.github.io","list.json"]);f(a,e.json,function(a){d(a)})},
download:f,getProjectInfo:function(d){var a=util.buildUrl(["Lucouse.github.io","project.json"]);f(a,e.json,function(a){d(a)})}}},api=new Api,Util=function(){function f(a){var b=a.length;a.forEach(function(c,g){g+1<b&&c.appendChild(a[g+1])})}function e(a){var b=(new JSZip).folder(a.folder.name);b.file(a.folder.file[0].name,a.folder.file[0].value);b.file(a.folder.file[1].name,a.folder.file[1].value);b.generateAsync({type:"base64"}).then(function(a){location.href="data:application/zip;base64,"+a})}function d(a,
b){var c="",g;for(g in a)c=c+a[g]+";";b(c)}return{buildDom:f,downloadComponent:function(a){api.getComponent(a,"index.html",function(b){api.getComponent(a,"index.css",function(c){e({folder:{name:a,file:[{name:"index.html",value:b},{name:"index.css",value:c}]}})})})},buildZip:e,buildUrl:function(a){var b="";a.forEach(function(a){b=b+"/"+a});return b},buildMailToAddress:function(a,b){var c="MailTo:";d(a.address,function(g){c=c+g+"?";c=c+"subject="+a.subject+"&";d(a.cc,function(g){""!==g&&(c=c+"cc="+
g+"&");d(a.bcc,function(d){""!==g&&(c=c+"bcc="+d+"&"+a.body);c=c+"body="+a.body;b(c)})})})},buildIcon:function(a,b,c){var g=document.createElement("div"),d=document.createElement("div"),e=document.createElement("i");g.setAttribute("id","icon-panel");e.setAttribute("class",b.iconClass+" tooltip");e.setAttribute("data-tooltip",b["data-tooltip"]);f([a,g,d,e]);void 0!==c&&c(e)}}},util=new Util;
window.onload=function(f){function e(a,b){util.buildIcon(a,{iconClass:"i_download","data-tooltip":"\u4e0b\u8f7d"},function(a){a.onclick=function(a){util.downloadComponent(b)}});var c=document.createElement("a");util.buildMailToAddress({address:["aaa@a.com","bbb@b.com"],subject:"test",cc:[],bcc:[],body:"test"},function(a){c.setAttribute("href",a)});document.body.appendChild(c);util.buildIcon(a,{iconClass:"i_feedback","data-tooltip":"\u53cd\u9988"},function(a){a.onclick=function(a){c.click()}});util.buildIcon(a,
{iconClass:"i_open","data-tooltip":"\u65b0\u7a97\u53e3\u6253\u5f00"},function(a){a.onclick=function(a){d(b)}})}function d(a){cover.showCover();var b=document.createElement("div"),c=document.createElement("h3"),d=document.createElement("div"),e=document.createElement("div");b.appendChild(c);b.appendChild(d);b.appendChild(e);d.setAttribute("class","component-detail-content");e.setAttribute("class","popUp-toolbar-container");api.getComponent(a,"index.html",function(g){d.innerHTML=g.replace("index.css",
"component/"+a+"/index.min.css").replace("index.js","component/"+a+"/index.min.js");api.getComponentList(function(b){for(var d in b)if(b[d].id===a){c.innerHTML=b[d].name_cn;var g=void 0,f=b[d].compatibility,l=e,k="",h="";for(g in f){switch(f[g].name){case "weChat":k="i_wechat wechat-icon";h="\u5fae\u4fe1";break;case "chrome":k="i_chrome chrome-icon";h="Chrome";break;case "firefox":k="i_firefox firefox-icon";h="\u706b\u72d0";break;case "ie":k="i_ie ie-icon";h="IE";break;case "edge":k="i_edge edge-icon",
h="Edge"}util.buildIcon(l,{iconClass:k,"data-tooltip":h})}}});popUp.showPopUp(void 0,"custom-popUp-win",b)})}(function(){api.getComponentList(function(a){a.forEach(function(a){api.getComponent(a.id,"index.html",function(b){var c=document.createElement("div"),d=document.createElement("h3"),f=document.createElement("div"),h=document.createElement("div");c.setAttribute("class","main-panel");d.innerText=a.name_cn;f.innerHTML=b.replace("index.css","component/"+a.id+"/index.min.css").replace("index.js",
"component/"+a.id+"/index.min.js");h.setAttribute("class","component-tooBar");e(h,a.id);util.buildDom([document.getElementById("container"),c,d]);util.buildDom([c,f]);util.buildDom([c,h])})})})})();(function(){api.getProjectInfo(function(a){var b=document.getElementsByClassName("header")[0],c=document.createElement("div"),d=document.createElement("a"),e=document.createElement("h2"),f=document.createElement("div"),h=document.createElement("div");e.innerText=a.projectName;f.innerText=a.version;h.innerText=
a.latestUpdateDate;c.setAttribute("class","project-info");d.setAttribute("href","https://lucouse.github.io");util.buildDom([b,c]);util.buildDom([c,d,e]);util.buildDom([c,f]);util.buildDom([c,h])})})();(function(){var a=document.getElementsByClassName("footer"),b=document.createElement("div"),c=document.createElement("ul"),d=["\u5e2e\u52a9","\u8054\u7cfb\u6211\u4eec"],e;for(e in d){var f=document.createElement("li");f.setAttribute("class","footer-li");f.innerHTML=d[e];c.appendChild(f)}b.appendChild(c);
a[0].appendChild(b)})()};
var Cover=function(){var f=document.createElement("div"),e=document.body;return{showCover:function(d){void 0!=d&&(e=d);f.setAttribute("class","cover");e.appendChild(f)},removeCover:function(){e.removeChild(f)}}},cover=new Cover,Message=function(){function f(d){d.fadeOut(800,function(){d.remove()})}function e(d,a){var b=$("<div></div>");a=$("<div></div>");var c=$("<div></div>");a.text("X");b.attr("class","message-container");a.attr("class","message-close");a.click(function(){f(b)});c.html(d);b.append(a);
b.append(c);b.fadeOut(8E3,function(){b.remove()});return b}return{type:{success:"success",error:"error",info:"info",warning:"warning"},alertMessage:function(d,a){$(document.body).append(e(d,a))}}},message=new Message,PopUp=function(){return{showPopUp:function(f,e,d){cover.showCover();void 0==f&&(f=document.body);var a=document.createElement("div"),b=document.createElement("div"),c=document.createElement("div"),g=document.createElement("div"),l=document.createElement("i"),k=document.createElement("div");
b.setAttribute("class","close-button-container");c.setAttribute("id","icon-panel");l.setAttribute("class","i_close close-button-i");b.appendChild(c).appendChild(g).appendChild(l);void 0!==e?a.setAttribute("class",e):a.setAttribute("class","popUpWin");k.setAttribute("class","popUp-content");f.appendChild(a).appendChild(b);a.appendChild(k).appendChild(d);l.onclick=function(b){f.removeChild(a);cover.removeCover()}}}},popUp=new PopUp;
