var Api=function(){function e(f,a,b){fetch(f).then(function(b){if(a===c.json)return b.json();if(a===c.text)return b.text()}).then(function(a){b(a)}).catch(function(a){message.alertMessage(a,null);console.error(a)})}var c={json:"json",text:"text",html:"html",css:"css",xml:"xml"};return{getComponent:function(f,a,b){f=util.buildUrl(["Lucouse.github.io","component",f,a]);e(f,c.text,function(a){b(a)})},getComponentList:function(f){var a=util.buildUrl(["Lucouse.github.io","list.json"]);e(a,c.json,function(a){f(a)})},
download:e,getProjectInfo:function(f){var a=util.buildUrl(["Lucouse.github.io","project.json"]);e(a,c.json,function(a){f(a)})}}},api=new Api,Util=function(){function e(a){var b=a.length;a.forEach(function(d,g){g+1<b&&d.appendChild(a[g+1])})}function c(a){var b=(new JSZip).folder(a.folder.name);b.file(a.folder.file[0].name,a.folder.file[0].value);b.file(a.folder.file[1].name,a.folder.file[1].value);b.generateAsync({type:"base64"}).then(function(a){location.href="data:application/zip;base64,"+a})}function f(a,
b){var d="",g;for(g in a)d=d+a[g]+";";b(d)}return{buildDom:e,downloadComponent:function(a){api.getComponent(a,"index.html",function(b){api.getComponent(a,"index.css",function(d){c({folder:{name:a,file:[{name:"index.html",value:b},{name:"index.css",value:d}]}})})})},buildZip:c,buildUrl:function(a){var b="";a.forEach(function(a){b=b+"/"+a});return b},buildMailToAddress:function(a,b){var d="MailTo:";f(a.address,function(g){d=d+g+"?";d=d+"subject="+a.subject+"&";f(a.cc,function(g){""!==g&&(d=d+"cc="+
g+"&");f(a.bcc,function(f){""!==g&&(d=d+"bcc="+f+"&"+a.body);d=d+"body="+a.body;b(d)})})})},buildIcon:function(a,b,d){var g=document.createElement("div"),f=document.createElement("div"),c=document.createElement("i");g.setAttribute("id","icon-panel");c.setAttribute("class",b.iconClass+" tooltip");c.setAttribute("data-tooltip",b["data-tooltip"]);for(var h in b.attr)g.setAttribute(b.attr[h].name,b.attr[h].value);e([a,g,f,c]);void 0!==d&&d(c)}}},util=new Util;
window.onload=function(e){function c(a,b){util.buildIcon(a,{iconClass:"i_download","data-tooltip":"\u4e0b\u8f7d"},function(a){a.onclick=function(a){util.downloadComponent(b)}});var d=document.createElement("a");util.buildMailToAddress({address:["aaa@a.com","bbb@b.com"],subject:"test",cc:[],bcc:[],body:"test"},function(a){d.setAttribute("href",a)});document.body.appendChild(d);util.buildIcon(a,{iconClass:"i_feedback","data-tooltip":"\u53cd\u9988"},function(a){a.onclick=function(a){d.click()}});util.buildIcon(a,
{iconClass:"i_open","data-tooltip":"\u65b0\u7a97\u53e3\u6253\u5f00"},function(a){a.onclick=function(a){f(b)}})}function f(a){cover.showCover();var b=document.createElement("div"),d=document.createElement("h3"),g=document.createElement("div"),f=document.createElement("div");b.appendChild(d);b.appendChild(g);b.appendChild(f);g.setAttribute("class","component-detail-content");f.setAttribute("class","popUp-toolbar-container");api.getComponent(a,"index.html",function(c){g.innerHTML=c.replace("index.css",
"component/"+a+"/index.min.css").replace("index.js","component/"+a+"/index.min.js");api.getComponentList(function(b){for(var g in b)if(b[g].id===a){d.innerHTML=b[g].name_cn;var c=void 0,e=b[g].compatibility,m=f,k="",h="",l="";for(c in e){switch(e[c].name){case "weChat":k="i_wechat wechat-icon";h="\u5fae\u4fe1";l=""===e[c].version?"\u672a\u77e5":e[c].version;break;case "chrome":k="i_chrome chrome-icon";h="Chrome";l=""===e[c].version?"\u672a\u77e5":e[c].version;break;case "firefox":k="i_firefox firefox-icon";
h="\u706b\u72d0";l=""===e[c].version?"\u672a\u77e5":e[c].version;break;case "ie":k="i_ie ie-icon";h="IE";l=""===e[c].version?"\u672a\u77e5":e[c].version;break;case "edge":k="i_edge edge-icon",h="Edge",l=""===e[c].version?"\u672a\u77e5":e[c].version}util.buildIcon(m,{iconClass:k,"data-tooltip":h,attr:[{name:"version",value:l}]})}}});popUp.showPopUp(void 0,"custom-popUp-win",b)})}(function(){api.getComponentList(function(a){a.forEach(function(a){api.getComponent(a.id,"index.html",function(b){var d=
document.createElement("div"),f=document.createElement("h3"),e=document.createElement("div"),h=document.createElement("div");d.setAttribute("class","main-panel");f.innerText=a.name_cn;e.innerHTML=b.replace("index.css","component/"+a.id+"/index.min.css").replace("index.js","component/"+a.id+"/index.min.js");h.setAttribute("class","component-tooBar");c(h,a.id);util.buildDom([document.getElementById("container"),d,f]);util.buildDom([d,e]);util.buildDom([d,h])})})})})();(function(){api.getProjectInfo(function(a){var b=
document.getElementsByClassName("header")[0],d=document.createElement("div"),c=document.createElement("a"),f=document.createElement("h2"),e=document.createElement("div"),h=document.createElement("div");f.innerText=a.projectName;e.innerText=a.version;h.innerText=a.latestUpdateDate;d.setAttribute("class","project-info");c.setAttribute("href","https://lucouse.github.io");util.buildDom([b,d]);util.buildDom([d,c,f]);util.buildDom([d,e]);util.buildDom([d,h])})})();(function(){var a=document.getElementsByClassName("footer"),
b=document.createElement("div"),d=document.createElement("ul"),c=["\u5e2e\u52a9","\u8054\u7cfb\u6211\u4eec"],f;for(f in c){var e=document.createElement("li");e.setAttribute("class","footer-li");e.innerHTML=c[f];d.appendChild(e)}b.appendChild(d);a[0].appendChild(b)})()};
var Cover=function(){var e=document.createElement("div"),c=document.body;return{showCover:function(f){void 0!=f&&(c=f);e.setAttribute("class","cover");c.appendChild(e)},removeCover:function(){c.removeChild(e)}}},cover=new Cover,Message=function(){function e(c){c.fadeOut(800,function(){c.remove()})}function c(c,a){var b=$("<div></div>");a=$("<div></div>");var d=$("<div></div>");a.text("X");b.attr("class","message-container");a.attr("class","message-close");a.click(function(){e(b)});d.html(c);b.append(a);
b.append(d);b.fadeOut(8E3,function(){b.remove()});return b}return{type:{success:"success",error:"error",info:"info",warning:"warning"},alertMessage:function(e,a){$(document.body).append(c(e,a))}}},message=new Message,PopUp=function(){return{showPopUp:function(e,c,f){cover.showCover();void 0==e&&(e=document.body);var a=document.createElement("div"),b=document.createElement("div"),d=document.createElement("div"),g=document.createElement("div"),m=document.createElement("i"),k=document.createElement("div");
b.setAttribute("class","close-button-container");d.setAttribute("id","icon-panel");m.setAttribute("class","i_close close-button-i");b.appendChild(d).appendChild(g).appendChild(m);void 0!==c?a.setAttribute("class",c):a.setAttribute("class","popUpWin");k.setAttribute("class","popUp-content");e.appendChild(a).appendChild(b);a.appendChild(k).appendChild(f);m.onclick=function(b){e.removeChild(a);cover.removeCover()}}}},popUp=new PopUp;
